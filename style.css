body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif; margin: 0; padding: 0.5em; background-color: #f5f5f5; }
.container { max-width: 600px; margin: auto; background-color: white; padding: 0.8em; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
h1, h2 { text-align: center; color: #333; }
h2 { border-bottom: 2px solid #eee; padding-bottom: 0.5em; margin-top: 2.5em; }
form, fieldset { display: flex; flex-direction: column; gap: 1em; }
fieldset { border: 1px solid #ddd; border-radius: 4px; padding: 1em; margin-bottom: 1em; }
legend { font-weight: bold; color: #555; }
.input-group { display: flex; flex-direction: column; gap: 0.8em; }
.input-group.row { flex-direction: row; gap: 0.5em; align-items: center; }
.input-group > * { flex: 1; }
input, select, button { padding: 0.8em; font-size: 1em; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; width: 100%; }
select { -webkit-appearance: none; appearance: none; background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007CB2%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'); background-repeat: no-repeat; background-position: right .7em top 50%; background-size: .65em auto; padding-right: 2em; }
button { background-color: #007bff; color: white; font-weight: bold; cursor: pointer; border: none; transition: background-color 0.2s; margin-top: 0.5em; }
button.setting-save-btn { background-color: #28a745; margin-top: 0.5em; }
button:hover { opacity: 0.8; }

#start-gps-btn, #end-gps-btn { line-height: 1.4; padding-top: 0.7em; padding-bottom: 0.7em; word-break: keep-all; }
#start-gps-btn { background-color: #17a2b8; }
#end-gps-btn { background-color: #ffc107; color: #333; }
#gps-status { text-align: center; font-size: 0.9em; color: #555; background-color: #e9ecef; padding: 0.5em; border-radius: 4px; margin-top: 0.5em; line-height: 1.5;}

#start-wait-btn { background-color: #6c757d; }
#end-wait-btn { background-color: #dc3545; }
#wait-status { text-align: center; font-size: 0.9em; color: #555; background-color: #e9ecef; padding: 0.5em; border-radius: 4px; margin-top: 0.5em; }

.view-section { margin-top: 2em; }
.view-tabs { display: flex; border-bottom: 2px solid #ddd; }
.tab-btn { background-color: #f1f1f1; color: #555; border: 1px solid #ccc; border-bottom: none; cursor: pointer; padding: 12px 15px; margin-bottom: -2px; border-radius: 6px 6px 0 0; flex: 1; font-size: 1em; font-weight: 500; transition: all 0.2s ease-in-out; }
.tab-btn:hover:not(.active) { background-color: #e9ecef; }
.tab-btn.active { color: white; border-bottom: 2px solid white; }
.tab-btn[data-view="daily"].active { background-color: #28a745; border-color: #28a745; }
.tab-btn[data-view="monthly"].active { background-color: #007bff; border-color: #007bff; }
.tab-btn[data-view="yearly"].active { background-color: #17a2b8; border-color: #17a2b8; }
.view-content { display: none; padding-top: 1em; }
.view-content.active { display: block; }

.selector-group { display: flex; gap: 1em; justify-content: center; margin-bottom: 1em; }
.summary, .subsidy-summary, .cumulative-summary { border-radius: 4px; padding: 1em; margin-bottom: 1em; line-height: 1.8; }
.summary { background-color: #e9f5ff; }
.subsidy-summary { background-color: #f8f9fa; border: 1px solid #eee; text-align: center; }
.cumulative-summary { background-color: #fffde7; border: 1px solid #eee; }
.cumulative-summary strong { font-size: 1.1em; }

table { width: 100%; border-collapse: collapse; }
th, td { padding: 0.8em; text-align: left; }
th { background-color: #f2f2f2; }
.responsive-table th, .responsive-table td { border: 1px solid #ddd; }
.yearly-summary-table th, .yearly-summary-table td { border: 1px solid #ddd; text-align: center;}

.progress-bar-container { background-color: #e9ecef; border-radius: .25rem; height: 1rem; margin-top: 0.5em; }
.progress-bar { background-color: #17a2b8; height: 1rem; border-radius: .25rem; text-align: center; color: white; font-size: 0.8em; line-height: 1rem; }

.note { color: #555; font-size: 0.9em; }
.note a { color: #0056b3; text-decoration: none; margin-right: 5px; }
.note a:hover { text-decoration: underline; }
.income { color: green; font-weight: bold; }
.cost { color: red; font-weight: bold; }
.hidden { display: none; }
.action-buttons { display: grid; grid-template-columns: 1fr 1fr; gap: 1em; margin-top: 2em; }
.action-buttons button { width: 100%; margin: 0; }
#export-csv-btn { background-color: #28a745; }
#export-json-btn { background-color: #6c757d; }
#import-json-btn { background-color: #fd7e14; }
#clear-btn { background-color: #dc3545; }

@media screen and (max-width: 768px) {
    .responsive-table thead { display: none; }
    .responsive-table, .responsive-table tbody, .responsive-table tr, .responsive-table td { display: block; width: 100%; }
    .responsive-table tr { margin-bottom: 1em; border: 1px solid #ddd; border-radius: 4px; }
    .responsive-table td { text-align: right; padding-left: 50%; position: relative; border: none; border-bottom: 1px solid #eee; }
    .responsive-table td:before { content: attr(data-label); position: absolute; left: 0; width: 45%; padding-left: 1em; font-weight: bold; text-align: left; }
    .responsive-table tr td:last-child { border-bottom: none; }
    #yearly-view { display: block; width: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch; }
    .yearly-summary-table { width: auto; white-space: nowrap; }
}```

---

### **3. `script.js`**

```javascript
// --- DOM ìš”ì†Œ ---
const recordForm = document.getElementById('record-form');
const clearBtn = document.getElementById('clear-btn');
const exportCsvBtn = document.getElementById('export-csv-btn');
const exportJsonBtn = document.getElementById('export-json-btn');
const importJsonBtn = document.getElementById('import-json-btn');
const importFileInput = document.getElementById('import-file-input');
const dateInput = document.getElementById('date');
const timeInput = document.getElementById('time');
const typeSelect = document.getElementById('type');
const transportDetails = document.getElementById('transport-details');
const fromSelect = document.getElementById('from-center');
const toSelect = document.getElementById('to-center');
const fromCustom = document.getElementById('from-custom');
const toCustom = document.getElementById('to-custom');
const costInfoFieldset = document.getElementById('cost-info-fieldset');
const costWrapper = document.getElementById('cost-wrapper');
const incomeWrapper = document.getElementById('income-wrapper');
const costInput = document.getElementById('cost');
const incomeInput = document.getElementById('income');
const fuelDetails = document.getElementById('fuel-details');
const fuelUnitPriceInput = document.getElementById('fuel-unit-price');
const fuelLitersInput = document.getElementById('fuel-liters');
const fuelBrandSelect = document.getElementById('fuel-brand');
const supplyDetails = document.getElementById('supply-details');
const supplyItemInput = document.getElementById('supply-item');
const supplyMileageInput = document.getElementById('supply-mileage');

const tabBtns = document.querySelectorAll('.tab-btn');
const viewContents = document.querySelectorAll('.view-content');
const dailyDatePicker = document.getElementById('daily-date-picker');
const dailySummaryDiv = document.getElementById('daily-summary');
const dailyTbody = document.querySelector('#daily-records-table tbody');
const monthlyYearSelect = document.getElementById('monthly-year-select');
const monthlyMonthSelect = document.getElementById('monthly-month-select');
const monthlySummaryDiv = document.getElementById('monthly-summary');
const monthlyTbody = document.querySelector('#monthly-records-table tbody');
const yearlyYearSelect = document.getElementById('yearly-year-select');
const yearlyTbody = document.querySelector('#yearly-summary-table tbody');

const subsidyLimitInput = document.getElementById('subsidy-limit');
const subsidySaveBtn = document.getElementById('subsidy-save-btn');
const subsidySummaryDiv = document.getElementById('subsidy-summary');
const totalMileageInput = document.getElementById('total-mileage');
const totalMileageSaveBtn = document.getElementById('total-mileage-save-btn');
const cumulativeSummaryDiv = document.getElementById('cumulative-summary');

const startGpsBtn = document.getElementById('start-gps-btn');
const endGpsBtn = document.getElementById('end-gps-btn');
const gpsStatus = document.getElementById('gps-status');
const startCoordsInput = document.getElementById('start-coords');
const endCoordsInput = document.getElementById('end-coords');
const manualDistanceInput = document.getElementById('manual-distance');

const startWaitBtn = document.getElementById('start-wait-btn');
const endWaitBtn = document.getElementById('end-wait-btn');
const waitStatus = document.getElementById('wait-status');
const waitingTimeInput = document.getElementById('waiting-time');

// --- ì „ì—­ ë³€ìˆ˜ ---
let waitStartTime = null;
let waitTimerInterval = null;

// --- í•µì‹¬ ë¡œì§ ---
const getTodayString = () => new Date().toLocaleDateString('ko-KR', {year: 'numeric', month: '2-digit', day: '2-digit'}).replace(/\. /g, '-').slice(0, -1);
const getCurrentTimeString = () => new Date().toLocaleTimeString('ko-KR', {hour12: false, hour: '2-digit', minute: '2-digit'});

const formatToManwon = (valueInWon) => {
    if (!valueInWon) return '0';
    return (valueInWon / 10000).toLocaleString('ko-KR', { minimumFractionDigits: 1, maximumFractionDigits: 2 });
};

function getCenters() {
    const defaultCenters = ['ì•ˆì„±', 'ì•ˆì‚°', 'ìš©ì¸', 'ì´ì²œ', 'ì¸ì²œ'];
    const storedCenters = JSON.parse(localStorage.getItem('logistics_centers')) || defaultCenters;
    if (!localStorage.getItem('logistics_centers')) localStorage.setItem('logistics_centers', JSON.stringify(storedCenters));
    return storedCenters;
}
function addCenter(newCenter) {
    if (!newCenter || newCenter.trim() === '') return;
    const centers = getCenters();
    if (!centers.includes(newCenter.trim())) { centers.push(newCenter.trim()); localStorage.setItem('logistics_centers', JSON.stringify(centers)); }
}
function populateCenterSelectors() {
    const centers = getCenters();
    const options = centers.map(c => `<option value="${c}">${c}</option>`).join('') + '<option value="direct">ì§ì ‘ ì…ë ¥</option>';
    fromSelect.innerHTML = options; toSelect.innerHTML = options;
}

function toggleUI(type) {
    transportDetails.classList.toggle('hidden', !['í™”ë¬¼ìš´ì†¡', 'ê³µì°¨ì´ë™'].includes(type));
    fuelDetails.classList.toggle('hidden', type !== 'ì£¼ìœ ');
    supplyDetails.classList.toggle('hidden', type !== 'ì†Œëª¨í’ˆ');

    if(type === 'ì†Œëª¨í’ˆ') {
        supplyMileageInput.value = localStorage.getItem('total_vehicle_mileage') || '';
    }

    costInfoFieldset.classList.remove('hidden');
    costWrapper.classList.remove('hidden');
    incomeWrapper.classList.remove('hidden');

    if (type === 'í™”ë¬¼ìš´ì†¡') {
        costWrapper.classList.add('hidden');
    } else if (type === 'ê³µì°¨ì´ë™') {
        costInfoFieldset.classList.add('hidden');
    } else {
        incomeWrapper.classList.add('hidden');
    }
    costInput.readOnly = false;
}

function getGPS(point) {
    if (!navigator.geolocation) {
        gpsStatus.textContent = "ì˜¤ë¥˜: ìœ„ì¹˜ ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.";
        return;
    }
    const statusText = point === 'start' ? 'ì¶œë°œ' : 'ë„ì°©';
    gpsStatus.textContent = `GPS ìƒíƒœ: ${statusText} ì§€ì  ìœ„ì¹˜ ìˆ˜ì‹  ì¤‘...`;

    navigator.geolocation.getCurrentPosition(
        (position) => {
            const coords = {
                lat: position.coords.latitude.toFixed(6),
                lon: position.coords.longitude.toFixed(6)
            };
            const coordsString = `${coords.lat}, ${coords.lon}`;
            
            if (point === 'start') {
                startCoordsInput.value = coordsString;
                gpsStatus.innerHTML = `âœ… ì¶œë°œ GPS ê¸°ë¡ ì™„ë£Œ!<br><span class="note">${coordsString}</span>`;
            } else {
                endCoordsInput.value = coordsString;
                const start = startCoordsInput.value ? `ì¶œë°œ: ${startCoordsInput.value}` : 'ì¶œë°œì  ë¯¸ê¸°ë¡';
                gpsStatus.innerHTML = `âœ… ë„ì°© GPS ê¸°ë¡ ì™„ë£Œ!<br><span class="note">${start}<br>ë„ì°©: ${coordsString}</span>`;
            }
        },
        (error) => {
            let message = "ì˜¤ë¥˜: ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
            if (error.code === 1) message = "ì˜¤ë¥˜: ìœ„ì¹˜ ì •ë³´ ì ‘ê·¼ ê¶Œí•œì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤.";
            gpsStatus.textContent = message;
        }
    );
}

function startWaitTimer() {
    waitStartTime = Date.now();
    waitStatus.textContent = "ëŒ€ê¸° ì¤‘: 00:00:00";
    startWaitBtn.disabled = true;
    endWaitBtn.disabled = false;

    waitTimerInterval = setInterval(() => {
        const elapsedTime = Date.now() - waitStartTime;
        const seconds = Math.floor((elapsedTime / 1000) % 60).toString().padStart(2, '0');
        const minutes = Math.floor((elapsedTime / (1000 * 60)) % 60).toString().padStart(2, '0');
        const hours = Math.floor(elapsedTime / (1000 * 60 * 60)).toString().padStart(2, '0');
        waitStatus.textContent = `ëŒ€ê¸° ì¤‘: ${hours}:${minutes}:${seconds}`;
    }, 1000);
}

function stopWaitTimer() {
    if (waitTimerInterval) {
        clearInterval(waitTimerInterval);
    }
    if (waitStartTime) {
        const elapsedTime = Date.now() - waitStartTime;
        const totalMinutes = Math.round(elapsedTime / (1000 * 60));
        waitingTimeInput.value = totalMinutes;
        waitStatus.textContent = `âœ… ì´ ëŒ€ê¸°ì‹œê°„: ${totalMinutes}ë¶„ ê¸°ë¡ ì™„ë£Œ!`;
    }
    startWaitBtn.disabled = false;
    endWaitBtn.disabled = true;
    waitStartTime = null;
}

function displayDailyRecords() {
    const records = JSON.parse(localStorage.getItem('records')) || [];
    const selectedDate = dailyDatePicker.value;
    const filteredRecords = records.filter(r => r.date === selectedDate);
    
    dailyTbody.innerHTML = '';
    let dailyIncome = 0, dailyExpense = 0, dailyDistance = 0;

    filteredRecords.forEach(r => {
        dailyIncome += parseInt(r.income || 0);
        dailyExpense += parseInt(r.cost || 0);
        if (['í™”ë¬¼ìš´ì†¡', 'ê³µì°¨ì´ë™'].includes(r.type)) dailyDistance += parseFloat(r.distance || 0);
        
        const tr = document.createElement('tr');
        let detailsCell = '', moneyCell = '';
        if (['í™”ë¬¼ìš´ì†¡', 'ê³µì°¨ì´ë™'].includes(r.type)) {
            detailsCell = `<strong>${r.from} â†’ ${r.to}</strong><br><span class="note">${r.distance} km</span>`;
            let gpsLinks = '';
            if (r.start_gps) gpsLinks += `<a href="https://www.google.com/maps?q=${r.start_gps}" target="_blank">ğŸ“ì¶œë°œì </a> `;
            if (r.end_gps) gpsLinks += `<a href="https://www.google.com/maps?q=${r.end_gps}" target="_blank">ğŸë„ì°©ì </a>`;
            if(gpsLinks) detailsCell += `<br><span class="note">${gpsLinks}</span>`;
            if (r.waitingTime > 0) {
                detailsCell += `<br><span class="note">â±ï¸ ëŒ€ê¸°: ${r.waitingTime}ë¶„</span>`;
            }
            moneyCell = (r.income > 0 ? `<span class="income">+${formatToManwon(r.income)} ë§Œì›</span> ` : '') + (r.cost > 0 ? `<span class="cost">-${formatToManwon(r.cost)} ë§Œì›</span>` : '');
        } else if (r.type === 'ì£¼ìœ ') {
            detailsCell = `<strong>${parseFloat(r.liters || 0).toFixed(2)} L</strong> @ ${parseInt(r.unitPrice || 0).toLocaleString()} ì›/L<br><span class="note">${r.brand || ''}</span>`;
            moneyCell = `<span class="cost">-${formatToManwon(r.cost)} ë§Œì›</span>`;
        } else if (r.type === 'ì†Œëª¨í’ˆ') {
            detailsCell = `<strong>${r.supplyItem || 'ê¸°íƒ€ ì†Œëª¨í’ˆ'}</strong><br><span class="note">@ ${parseInt(r.mileage || 0).toLocaleString()} km</span>`;
            moneyCell = `<span class="cost">-${formatToManwon(r.cost)} ë§Œì›</span>`;
        } else {
            detailsCell = `<span class="note">${r.notes || ''}</span>`;
            moneyCell = `<span class="cost">-${formatToManwon(r.cost)} ë§Œì›</span>`;
        }
        tr.innerHTML = `
            <td data-label="ì‹œê°„">${r.time}</td>
            <td data-label="êµ¬ë¶„">${r.type === 'í™”ë¬¼ìš´ì†¡' ? 'ìš´ì†¡' : r.type}</td>
            <td data-label="ë‚´ìš©">${detailsCell}</td>
            <td data-label="ìˆ˜ì…/ì§€ì¶œ">${moneyCell}</td>
        `;
        dailyTbody.appendChild(tr);
    });
    dailySummaryDiv.innerHTML = `<strong>${selectedDate} ìš”ì•½</strong> | ì´ìˆ˜ì…: <span class="income">${formatToManwon(dailyIncome)} ë§Œì›</span> | ì´ì§€ì¶œ: <span class="cost">${formatToManwon(dailyExpense)} ë§Œì›</span> | ìš´í–‰ê±°ë¦¬: <strong>${dailyDistance.toFixed(1)} km</strong>`;
}

function displayMonthlyRecords() {
    const records = JSON.parse(localStorage.getItem('records')) || [];
    const selectedPeriod = `${monthlyYearSelect.value}-${monthlyMonthSelect.value}`;
    const filteredRecords = records.filter(r => r.date.startsWith(selectedPeriod));
    
    monthlyTbody.innerHTML = '';
    let totalIncome = 0, totalExpense = 0, totalDistance = 0, totalLiters = 0, totalFuelCost = 0;

    filteredRecords.forEach(r => {
        const tr = document.createElement('tr');
        let detailsCell = '', moneyCell = '';
        totalIncome += parseInt(r.income || 0);
        totalExpense += parseInt(r.cost || 0);
        if (['í™”ë¬¼ìš´ì†¡', 'ê³µì°¨ì´ë™'].includes(r.type)) {
            totalDistance += parseFloat(r.distance || 0);
            detailsCell = `<strong>${r.from} â†’ ${r.to}</strong><br><span class="note">${r.distance} km</span>`;
            let gpsLinks = '';
            if (r.start_gps) gpsLinks += `<a href="https://www.google.com/maps?q=${r.start_gps}" target="_blank">ğŸ“ì¶œë°œì </a> `;
            if (r.end_gps) gpsLinks += `<a href="https://www.google.com/maps?q=${r.end_gps}" target="_blank">ğŸë„ì°©ì </a>`;
            if(gpsLinks) detailsCell += `<br><span class="note">${gpsLinks}</span>`;
            if (r.waitingTime > 0) {
                detailsCell += `<br><span class="note">â±ï¸ ëŒ€ê¸°: ${r.waitingTime}ë¶„</span>`;
            }
            moneyCell = (r.income > 0 ? `<span class="income">+${formatToManwon(r.income)} ë§Œì›</span> ` : '') + (r.cost > 0 ? `<span class="cost">-${formatToManwon(r.cost)} ë§Œì›</span>` : '');
        } else if (r.type === 'ì£¼ìœ ') {
            totalLiters += parseFloat(r.liters || 0);
            totalFuelCost += parseInt(r.cost || 0);
            detailsCell = `<strong>${parseFloat(r.liters || 0).toFixed(2)} L</strong> @ ${parseInt(r.unitPrice || 0).toLocaleString()} ì›/L<br><span class="note">${r.brand || ''}</span>`;
            moneyCell = `<span class="cost">-${formatToManwon(r.cost)} ë§Œì›</span>`;
        } else if (r.type === 'ì†Œëª¨í’ˆ') {
            detailsCell = `<strong>${r.supplyItem || 'ê¸°íƒ€ ì†Œëª¨í’ˆ'}</strong><br><span class="note">@ ${parseInt(r.mileage || 0).toLocaleString()} km</span>`;
            moneyCell = `<span class="cost">-${formatToManwon(r.cost)} ë§Œì›</span>`;
        } else {
            detailsCell = `<span class="note">${r.notes || ''}</span>`;
            moneyCell = `<span class="cost">-${formatToManwon(r.cost)} ë§Œì›</span>`;
        }
        tr.innerHTML = `
            <td data-label="ì¼ì‹œ">${r.date.substring(5)} ${r.time}</td>
            <td data-label="êµ¬ë¶„">${r.type === 'í™”ë¬¼ìš´ì†¡' ? 'ìš´ì†¡' : r.type}</td>
            <td data-label="êµ¬ê°„ / ë‚´ìš©">${detailsCell}</td>
            <td data-label="ìˆ˜ì…/ì§€ì¶œ">${moneyCell}</td>
        `;
        monthlyTbody.appendChild(tr);
    });

    const netIncome = totalIncome - totalExpense;
    monthlySummaryDiv.innerHTML = `
        <strong>${monthlyYearSelect.value}ë…„ ${monthlyMonthSelect.value}ì›” ìš”ì•½</strong><br>
        ì´ ìˆ˜ì…: <span class="income">${formatToManwon(totalIncome)} ë§Œì›</span> | ì´ ì§€ì¶œ: <span class="cost">${formatToManwon(totalExpense)} ë§Œì›</span><br>
        ì •ì‚°: <strong>${formatToManwon(netIncome)} ë§Œì›</strong> | ì´ ìš´í–‰ê±°ë¦¬: <strong>${totalDistance.toFixed(1)} km</strong><br>
        ì´ ì£¼ìœ ëŸ‰: <strong>${totalLiters.toFixed(2)} L</strong> | ì´ ì£¼ìœ ë¹„ìš©: <span class="cost">${formatToManwon(totalFuelCost)} ë§Œì›</span>`;

    const subsidyLimit = parseFloat(localStorage.getItem('fuel_subsidy_limit')) || 0;
    const remainingLiters = subsidyLimit - totalLiters;
    const progressPercent = subsidyLimit > 0 ? Math.min(100, (totalLiters / subsidyLimit * 100)).toFixed(1) : 0;
    